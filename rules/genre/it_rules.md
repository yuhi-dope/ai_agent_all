# 情シス（IT）専門ルール

## ドメイン概要

情シスエージェントは、社内ITインフラ・ヘルプデスク・IT資産管理・ライセンス管理・アカウント管理を行うシステムである。社内のIT課題を一元管理し、対応SLAの可視化と効率的な運用を支援する。

---

## 必須エンティティ

| エンティティ | 説明 | 必須フィールド例 |
|---|---|---|
| **ITAsset（IT資産）** | PC・サーバー・周辺機器 | name, asset_type, serial_number, assigned_to, purchase_date, status |
| **License（ライセンス）** | ソフトウェアライセンス | software_name, license_key, seats_total, seats_used, expiry_date |
| **HelpTicket（ヘルプデスクチケット）** | 社内問い合わせ | reporter, subject, description, category, priority, status, assigned_to |
| **Account（アカウント）** | SaaS/社内システムアカウント | employee_id, service_name, username, status(有効/無効), provisioned_at |
| **Incident（インシデント）** | 障害記録 | title, severity(P1-P4), affected_systems, started_at, resolved_at, root_cause |

---

## ビジネスルール（Spec Agent / Coder Agent 共通）

### ヘルプデスク

1. **チケットステータス**: 新規 → 対応中 → 保留 → 解決済 → クローズ
2. **優先度**: P1（業務停止）/ P2（業務支障あり）/ P3（不便だが回避可能）/ P4（要望・質問）
3. **SLA（対応目標時間）**: P1: 1時間以内 / P2: 4時間以内 / P3: 1営業日 / P4: 3営業日
4. **SLA超過アラート**: 期限を超えたチケットは赤色表示 + 管理者通知
5. **カテゴリ**: ネットワーク / PC不具合 / ソフトウェア / アカウント / その他

### IT資産管理

- ステータス: 在庫 / 利用中 / 修理中 / 廃棄予定 / 廃棄済
- 購入日から5年経過した資産は「更新推奨」アラート
- 棚卸し: 全資産の現物確認チェックリスト（年1回想定）

### ライセンス管理

- 利用数 / 上限数の管理。利用率 90% 以上で警告
- 期限切れ 30日前にリマインダー
- 退職者のライセンス回収漏れを検知

### インシデント管理

- 重大度: P1（全社影響）/ P2（部門影響）/ P3（個人影響）/ P4（軽微）
- ポストモーテム: P1/P2 インシデントは root_cause と再発防止策を必須記録

---

## 受入条件テンプレート

- [ ] ヘルプデスクチケットを起票し、優先度を設定できる
- [ ] SLA 超過チケットがハイライト表示される
- [ ] IT資産を登録し、社員への割当・返却を管理できる
- [ ] ライセンスの利用数/上限数を管理し、上限超過時にアラートが出る
- [ ] インシデントを記録し、P1/P2 はポストモーテムが必須入力になる
- [ ] 退職者のアカウント一覧を確認し、無効化状態を管理できる

---

## Coder 向け実装指針

- SLA 計算は営業日ベース（土日祝を除外）。祝日マスタまたは簡易的に土日除外で実装
- チケット一覧はリアルタイム更新不要だが、ソート・フィルタ・検索は必須
- 資産の QR コード/バーコード対応は将来想定として `asset_code` フィールドを用意
- ライセンス利用数は `it_accounts` テーブルの service_name ごとの COUNT で算出
- ダッシュボードにチケットのステータス別件数・SLA 遵守率を表示
