# =============================================================================
# Develop Agent System - 環境変数サンプル
# このファイルを .env.local にコピーして値を設定してください。
# .env.local は .gitignore で管理されており、リポジトリには含まれません。
# =============================================================================

# ---- 環境識別 ----
# local / development / dev: メモリフォールバック許可（ローカル開発用）
# staging:                   GCP Secret Manager 必須
# production / prod:         GCP Secret Manager 必須
ENV=local

# ---- 認証 ----
# true にすると全 API で Bearer トークン必須（デフォルト: true）
# ローカル開発でも true を推奨（ロール制御・テナント分離に必要）
REQUIRE_AUTH=true
# 開発者権限を持つメールアドレス（カンマ区切り）
DEVELOPER_EMAILS=dev@yourcompany.com

# ---- Supabase ----
# Supabase Dashboard > Settings > API で確認
SUPABASE_URL=https://your-project-ref.supabase.co
# service_role キー（秘密）: サーバーサイドのみで使用。絶対にクライアントに公開しないこと。
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# anon キー（公開可）: フロントエンドの Supabase Auth 初期化に使用
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ---- LLM ----
# デフォルト: Google Gemini (LLM_PROVIDER=gemini)
GEMINI_API_KEY=AIza...
# フォールバック: Anthropic Claude (LLM_PROVIDER=claude)
ANTHROPIC_API_KEY=sk-ant-...
# LLM_PROVIDER=gemini または claude
LLM_PROVIDER=gemini

# ---- GCP ----
# Vertex AI を使う場合（LLM_PROVIDER=gemini 且つ Vertex 経由時）
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_CLOUD_LOCATION=asia-northeast1

# GCP Secret Manager: 本番/ステージング環境で OAuth トークン等を保管する GCP プロジェクト ID
# ローカル開発時は未設定でよい（メモリフォールバック）
GCP_SECRET_PROJECT_ID=

# ---- Notion API ----
NOTION_API_KEY=secret_...

# ---- チャネル連携（Slack / Notion / Google Drive / Chatwork）----
# テナントごとの認証情報（CLIENT_ID, CLIENT_SECRET 等）はダッシュボードの
# 「連携」>「アプリ設定」で各企業が個別に登録します。
# .env.local での設定は不要です。redirect_uri は BASE_URL から自動生成されます。

# ---- OAuth 連携（インフラ用・GitHub オンボーディングのみ）----
# GitHub OAuth（オンボーディング自動化用）
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_OAUTH_REDIRECT_URI=http://localhost:8000/api/oauth/github/callback

# ---- メールアラート（Resend）----
# run 失敗・予算超過時に DEVELOPER_EMAILS 宛にメール送信
# https://resend.com/api-keys から取得
RESEND_API_KEY=re_...

# ---- アプリケーション設定 ----
# 本番 URL（テナント向け URL 生成・クライアントリダイレクトに使用）
BASE_URL=http://localhost:8000

# ---- 予算管理 ----
# 1 run あたりの予算上限 (USD)
MAX_COST_PER_TASK_USD=0.5

# ---- 出力クリーンアップ ----
# 1=有効 / 0=無効（output/ ディレクトリの古い成果物を自動削除）
ENABLE_OUTPUT_CLEANUP_SCHEDULER=1
OUTPUT_CLEANUP_TTL_DAYS=30
# クリーンアップ間隔（時間）
OUTPUT_CLEANUP_INTERVAL_HOURS=24

# ---- DB 直接接続（マイグレーションランナー用）----
# Supabase Dashboard > Settings > Database > Connection string (URI)
# 形式: postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres
DATABASE_URL=

# ---- インフラトークン暗号化 ----
# Supabase Management API / Vercel トークンの暗号化に使用する Fernet キー
# 生成: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 未設定時は平文で保存されます（ローカル開発のみ許容）
TOKEN_ENCRYPTION_KEY=

# ---- メモリフォールバック強制許可（緊急用）----
# ENV=staging/production でも Secret Manager なしでメモリ保存を許可する。
# 本番では使わないこと。
ALLOW_SECRET_FALLBACK=
